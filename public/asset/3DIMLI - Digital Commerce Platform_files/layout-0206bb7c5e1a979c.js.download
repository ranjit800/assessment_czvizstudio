(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5949],{75907:function(e,t,a){Promise.resolve().then(a.bind(a,27381)),Promise.resolve().then(a.bind(a,50773)),Promise.resolve().then(a.bind(a,34653)),Promise.resolve().then(a.bind(a,30917)),Promise.resolve().then(a.bind(a,25277)),Promise.resolve().then(a.t.bind(a,72972,23)),Promise.resolve().then(a.t.bind(a,41305,23)),Promise.resolve().then(a.bind(a,49551)),Promise.resolve().then(a.bind(a,11751)),Promise.resolve().then(a.bind(a,99246)),Promise.resolve().then(a.bind(a,21641)),Promise.resolve().then(a.bind(a,27605)),Promise.resolve().then(a.bind(a,88806)),Promise.resolve().then(a.bind(a,76754)),Promise.resolve().then(a.bind(a,29416)),Promise.resolve().then(a.bind(a,37249))},49551:function(e,t,a){"use strict";a.d(t,{default:function(){return i}});var r=a(57437),n=a(2265),s=a(48667),l=a(80605),c=a(99376);function i(){let{status:e}=(0,l.useSession)(),t=(0,c.usePathname)();return(0,n.useEffect)(()=>{if("unauthenticated"===e){let a=setInterval(()=>{var r,n,s,c;console.log(t,null===(n=window.google)||void 0===n?void 0:null===(r=n.accounts)||void 0===r?void 0:r.id,e,"pathname, googleAccountId, status"),(null===(c=window.google)||void 0===c?void 0:null===(s=c.accounts)||void 0===s?void 0:s.id)&&(window.google.accounts.id.initialize({client_id:"686108870737-4c000asmbncb8km57p8ss621kv5s0u52.apps.googleusercontent.com",callback:e=>{let{credential:t}=e;(0,l.signIn)("googleonetap",{credential:t})}}),window.google.accounts.id.prompt(),console.log("Google One Tap initialized"),clearInterval(a))},200);setTimeout(()=>clearInterval(a),5e3)}},[e,t]),(0,r.jsx)(s.default,{src:"https://accounts.google.com/gsi/client",strategy:"afterInteractive"})}},99246:function(e,t,a){"use strict";a.d(t,{default:function(){return w}});var r=a(57437),n=a(58335),s=a(27648),l=a(11140),c=a(88612),i=a(30699),d=a(31229),o=a(29501),u=a(13590),f=a(2265),m=a(20059),h=a(33145),b=a(87820),x=a(90357),p=a(53459),g=a(83464),y=a(50541);let v=d.z.object({email:d.z.string().email("Invalid email address")});function j(){let[e,t]=(0,f.useState)(null),[a,n]=(0,f.useState)(null),[s,l]=(0,f.useState)(!1),d=(0,y.d)(),j=(0,o.cI)({resolver:(0,u.F)(v),mode:"onChange",defaultValues:{email:""}}),{watch:N,setError:w,formState:{errors:$,isSubmitSuccessful:k,isValid:_,isDirty:I,isSubmitting:S},clearErrors:E,reset:M}=j,P=async a=>{if(!s&&!1!==e)try{let e=await g.Z.post("/api/subscribers",{email:a.email,status:"SUBSCRIBED"});if(console.log("response",e),!e.data.success){w("email",{type:"manual",message:e.data.message});return}n("Thank you for subscribing!"),M(),t(null)}catch(e){w("email",{type:"manual",message:"Something went wrong. Please try again."})}},C=N("email"),z=function(e,t){let[a,r]=(0,f.useState)(e);return(0,f.useEffect)(()=>{let t=setTimeout(()=>{r(e)},500);return()=>{clearTimeout(t)}},[e,500]),a}(C,0);return(0,f.useEffect)(()=>{let e=async()=>{if(!C){t(!1);return}l(!0);try{let e=await g.Z.post("/api/subscribers/exists",{email:z});console.log("emailCheckResult",e),e.data.success?E("email"):w("email",{type:"manual",message:"This email address is already taken."}),t(e.data.success)}catch(e){w("email",{type:"manual",message:"Error checking email availability."}),t(!1)}finally{l(!1)}};z&&!$.email?e():I&&t(!1)},[z]),(0,f.useEffect)(()=>{if(a){let e=setTimeout(()=>{n(null)},3e3);return()=>clearTimeout(e)}},[a]),(0,r.jsx)(o.RV,{...j,children:(0,r.jsxs)("form",{onSubmit:j.handleSubmit(P),className:"flex items-baseline space-x-2 flex-1 justify-center md:justify-end flex-wrap",children:[(0,r.jsx)(o.Qr,{name:"email",control:j.control,render:t=>{let{field:l}=t;return(0,r.jsxs)(m.xJ,{children:[(0,r.jsx)(m.NI,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute z-40 inset-y-0 end-0 flex items-center px-3.5",children:s?(0,r.jsx)(p.Z,{className:"animate-spin h-5 w-5"}):!0===e?(0,r.jsx)(h.default,{src:"/icons/checked_green.png",alt:"valid",width:d?12:20,height:d?12:20}):!1===e&&(0,r.jsx)(h.default,{src:"/icons/checked_red.png",alt:"invalid",width:d?12:20,height:d?12:20})}),(0,r.jsx)(c.II,{className:(0,b.cn)(x.inputStyle,"w-full md:w-[300px] h-full dark:border-neutral-700 mt-0 bg-transparent"),placeholder:"Subscribe to our newsletter",...l,onChange:e=>{l.onChange(e),E("email"),n(null)}})]})}),$.email&&(0,r.jsx)(m.zG,{children:$.email.message}),a&&(0,r.jsx)("p",{className:"text-green-600 mt-2 ml-1 text-md font-medium",children:a})]})}}),(0,r.jsxs)(i.ZP,{type:"submit",size:"lg",variants:"gradient",className:"min-w-[95.75px] text-xs md:text-sm md:min-w-[150px] h-[27.25px] md:h-[42px] relative mt-3",disabled:S||s||!1===e,children:["Subscribe",S&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)(p.Z,{className:"animate-spin h-5 w-5"})})]})]})})}var N=a(99376);function w(){let e=(0,N.usePathname)(),t=["/","/cart","/search"].includes(e);return["/my-account","/store","/dashboard","/verify"].some(t=>e.includes(t))?null:(0,r.jsx)("footer",{className:"w-full bg-white dark:bg-neutral-950 transition-colors duration-300 ease-in-out text-gray-800 pt-7 md:pt-8 ".concat(t?"mt-24 3xl:mt-40":"mt-7 3xl:mt-4"),children:(0,r.jsxs)("div",{className:"container px-5 lg:!px-8 pb-0 lg:pb-0 mx-auto ",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-16 mb-10 md:mb-16 bg-gray-50 dark:bg-card py-5 px-4 md:py-6 md:px-10 rounded-2xl",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-3",children:[(0,r.jsx)("span",{className:"text-sm md:text-lg font-medium text-black dark:text-neutral-400 text-center",children:"Platform powered by"}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)("img",{src:n.oQ,alt:"3DIMLI Logo",className:"h-4 w-auto md:h-7 md:w-auto"})})]}),(0,r.jsx)("div",{className:"hidden md:block h-8 w-px bg-gray-300 dark:bg-neutral-600"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-3",children:[(0,r.jsx)("span",{className:"text-sm md:text-lg font-medium text-black dark:text-neutral-400 text-center",children:"Payments powered by"}),(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 124 33",className:"h-5 md:h-8 w-auto",children:[(0,r.jsx)("path",{d:"M46.211 6.749h-6.839a.95.95 0 0 0-.939.802l-2.766 17.537a.57.57 0 0 0 .564.658h3.265a.95.95 0 0 0 .939-.803l.746-4.73a.95.95 0 0 1 .938-.803h2.165c4.505 0 7.105-2.18 7.784-6.5.306-1.89.013-3.375-.872-4.415-.972-1.142-2.696-1.746-4.985-1.746zM47 13.154c-.374 2.454-2.249 2.454-4.062 2.454h-1.032l.724-4.583a.57.57 0 0 1 .563-.481h.473c1.235 0 2.4 0 3.002.704.359.42.469 1.044.332 1.906zM66.654 13.075h-3.275a.57.57 0 0 0-.563.481l-.145.916-.229-.332c-.709-1.029-2.29-1.373-3.868-1.373-3.619 0-6.71 2.741-7.312 6.586-.313 1.918.132 3.752 1.22 5.031.998 1.176 2.426 1.666 4.125 1.666 2.916 0 4.533-1.875 4.533-1.875l-.146.91a.57.57 0 0 0 .562.66h2.95a.95.95 0 0 0 .939-.803l1.77-11.209a.568.568 0 0 0-.561-.658zm-4.565 6.374c-.316 1.871-1.801 3.127-3.695 3.127-.951 0-1.711-.305-2.199-.883-.484-.574-.668-1.391-.514-2.301.295-1.855 1.805-3.152 3.67-3.152.93 0 1.686.309 2.184.892.499.589.697 1.411.554 2.317zM84.096 13.075h-3.291a.954.954 0 0 0-.787.417l-4.539 6.686-1.924-6.425a.953.953 0 0 0-.912-.678h-3.234a.57.57 0 0 0-.541.754l3.625 10.638-3.408 4.811a.57.57 0 0 0 .465.9h3.287a.949.949 0 0 0 .781-.408l10.946-15.8a.57.57 0 0 0-.468-.895z",fill:"#253B80"}),(0,r.jsx)("path",{d:"M94.992 6.749h-6.84a.95.95 0 0 0-.938.802l-2.766 17.537a.569.569 0 0 0 .562.658h3.51a.665.665 0 0 0 .656-.562l.785-4.971a.95.95 0 0 1 .938-.803h2.164c4.506 0 7.105-2.18 7.785-6.5.307-1.89.012-3.375-.873-4.415-.971-1.142-2.694-1.746-4.983-1.746zm.789 6.405c-.373 2.454-2.248 2.454-4.062 2.454h-1.031l.725-4.583a.568.568 0 0 1 .562-.481h.473c1.234 0 2.4 0 3.002.704.359.42.468 1.044.331 1.906zM115.434 13.075h-3.273a.567.567 0 0 0-.562.481l-.145.916-.23-.332c-.709-1.029-2.289-1.373-3.867-1.373-3.619 0-6.709 2.741-7.311 6.586-.312 1.918.131 3.752 1.219 5.031 1 1.176 2.426 1.666 4.125 1.666 2.916 0 4.533-1.875 4.533-1.875l-.146.91a.57.57 0 0 0 .564.66h2.949a.95.95 0 0 0 .938-.803l1.771-11.209a.571.571 0 0 0-.565-.658zm-4.565 6.374c-.314 1.871-1.801 3.127-3.695 3.127-.949 0-1.711-.305-2.199-.883-.484-.574-.666-1.391-.514-2.301.297-1.855 1.805-3.152 3.67-3.152.93 0 1.686.309 2.184.892.501.589.699 1.411.554 2.317zM119.295 7.23l-2.807 17.858a.569.569 0 0 0 .562.658h2.822c.469 0 .867-.34.939-.803l2.768-17.536a.57.57 0 0 0-.562-.659h-3.16a.571.571 0 0 0-.562.482z",fill:"#179BD7"}),(0,r.jsx)("path",{d:"M7.266 29.154l.523-3.322-1.165-.027H1.061L4.927 1.292a.316.316 0 0 1 .314-.268h9.38c3.114 0 5.263.648 6.385 1.927.526.6.861 1.227 1.023 1.917.17.724.173 1.589.007 2.644l-.012.077v.676l.526.298a3.69 3.69 0 0 1 1.065.812c.45.513.741 1.165.864 1.938.127.795.085 1.741-.123 2.812-.24 1.232-.628 2.305-1.152 3.183a6.547 6.547 0 0 1-1.825 2c-.696.494-1.523.869-2.458 1.109-.906.236-1.939.355-3.072.355h-.73c-.522 0-1.029.188-1.427.525a2.21 2.21 0 0 0-.744 1.328l-.055.299-.924 5.855-.042.215c-.011.068-.03.102-.058.125a.155.155 0 0 1-.096.035H7.266z",fill:"#253B80"}),(0,r.jsx)("path",{d:"M23.048 7.667c-.028.179-.06.362-.096.55-1.237 6.351-5.469 8.545-10.874 8.545H9.326c-.661 0-1.218.48-1.321 1.132L6.596 26.83l-.399 2.533a.704.704 0 0 0 .695.814h4.881c.578 0 1.069-.42 1.16-.99l.048-.248.919-5.832.059-.32c.09-.572.582-.992 1.16-.992h.73c4.729 0 8.431-1.92 9.513-7.476.452-2.321.218-4.259-.978-5.622a4.667 4.667 0 0 0-1.336-1.03z",fill:"#179BD7"}),(0,r.jsx)("path",{d:"M21.754 7.151a9.757 9.757 0 0 0-1.203-.267 15.284 15.284 0 0 0-2.426-.177h-7.352a1.172 1.172 0 0 0-1.159.992L8.05 17.605l-.045.289a1.336 1.336 0 0 1 1.321-1.132h2.752c5.405 0 9.637-2.195 10.874-8.545.037-.188.068-.371.096-.55a6.594 6.594 0 0 0-1.017-.429 9.045 9.045 0 0 0-.277-.087z",fill:"#222D65"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-6 mb-6 md:mb-0",children:[(0,r.jsx)("a",{href:"https://www.producthunt.com/products/3dimli-digital-commerce-platform?embed=true&utm_source=badge-featured&utm_medium=badge&utm_source=badge-3dimli",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)("img",{src:"https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=976739&theme=light&t=".concat(Date.now()),alt:"…",width:250,height:54,style:{width:250,height:54}})}),(0,r.jsxs)(s.default,{href:"#",className:"text-gray-900 dark:text-neutral-100 hover:opacity-80 transition-opacity",children:[(0,r.jsx)(l.AMt,{className:"h-4 md:h-6 w-4 md:w-6"}),(0,r.jsx)("span",{className:"sr-only",children:"Twitter"})]}),(0,r.jsxs)(s.default,{href:"#",className:"text-[#4267B2] hover:opacity-80 transition-opacity",children:[(0,r.jsx)(l.k1O,{className:"h-4 md:h-6 w-4 md:w-6"}),(0,r.jsx)("span",{className:"sr-only",children:"Facebook"})]}),(0,r.jsxs)(s.default,{href:"#",className:"text-[#E4405F] hover:opacity-80 transition-opacity",children:[(0,r.jsx)(l.Vs6,{className:"h-4 md:h-6 w-4 md:w-6"}),(0,r.jsx)("span",{className:"sr-only",children:"Instagram"})]}),(0,r.jsxs)(s.default,{href:"#",className:"text-[#FF0000] hover:opacity-80 transition-opacity",children:[(0,r.jsx)(l.bUO,{className:"h-4 md:h-6 w-4 md:w-6"}),(0,r.jsx)("span",{className:"sr-only",children:"YouTube"})]}),(0,r.jsxs)(s.default,{href:"#",className:"text-[#0A66C2] hover:opacity-80 transition-opacity",children:[(0,r.jsx)(l.NQh,{className:"h-4 md:h-6 w-4 md:w-6"}),(0,r.jsx)("span",{className:"sr-only",children:"LinkedIn"})]})]}),(0,r.jsx)(j,{})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 md:gap-8 mb-10 md:mb-16",children:["3DIMLI","Discover","Policies","Company"].map(e=>(0,r.jsxs)("div",{className:"space-y-2.5 md:space-y-4 flex flex-col w-full max-md:items-center justify-start",children:[(0,r.jsx)("h3",{className:"font-semibold dark:text-neutral-50",children:e}),(function(e){switch(e){case"3DIMLI":return[{href:"/support",text:"Support"}];case"Discover":return[{href:"/search?productType=ThreeDModel",text:"3D Models"},{href:"/search?productType=Ebook",text:"Ebooks"},{href:"#",text:"More Coming Soon..."}];case"Dashboards":return[{href:"/seller-dashboard",text:"Seller Dashboard"},{href:"/customer-dashboard",text:"Customer Dashboard"}];case"Policies":return[{href:"/privacy-policy",text:"Privacy Policy"},{href:"/acceptable-use-policy",text:"Acceptable Use Policy"},{href:"/refund-policy",text:"Refund Policy"},{href:"/terms-of-services",text:"Terms Of Service"},{href:"/cookie-policy",text:"Cookie Policy"}];case"Company":return[{href:"/about",text:"About"},{href:"/help-center",text:"Help Center"}];default:return[]}})(e).map(e=>(0,r.jsx)(s.default,{href:e.href,className:"block text-xs md:text-sm text-black dark:text-neutral-400 transition-colors",children:e.text},e.text))]},e))}),(0,r.jsx)("div",{className:"border-t border-gray-300 dark:border-neutral-700 py-8",children:(0,r.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:(0,r.jsxs)("p",{className:"text-xs md:text-sm text-black dark:text-neutral-400",children:["\xa9 2024 - ",new Date().getFullYear()," 3DIMLI. All rights reserved."]})})})]})})}},7423:function(e,t,a){"use strict";a.d(t,{$1:function(){return d},$g:function(){return f},AG:function(){return N},C$:function(){return p},Li:function(){return $},Ny:function(){return n},UJ:function(){return k},Vt:function(){return c},WX:function(){return g},Wr:function(){return x},Wx:function(){return u},Zk:function(){return j},bn:function(){return m},eQ:function(){return w},f6:function(){return l},kV:function(){return h},oo:function(){return v},pN:function(){return _},rE:function(){return i},rV:function(){return I},vW:function(){return o},v_:function(){return s},wR:function(){return y},yr:function(){return b}}),a(83079);var r=a(12119);(0,r.$)("8df3bcce7048139f4ad3a9bd04dab6bc31aeff07"),(0,r.$)("e948d1a2616c65b50e60829a34143cbc1a441f94"),(0,r.$)("aeddba53707bc3c79a8857fdaf26c45e5945e13b");var n=(0,r.$)("adb93fe3587b4f4d91e1a772d8fe8903720b5aad"),s=(0,r.$)("f2fd081a871825dd547c687914c2c5a4e31fd8df"),l=(0,r.$)("6fa6d8dfaa671f164e5e7fae54546636e4ce9d41");(0,r.$)("f0fae87ad80311154855a79e6d21e40eaf00ee35"),(0,r.$)("cf2b3feaec51fa5a34e0dcafd70307933b6aaa89"),(0,r.$)("e311beb3d81c5728891fd2dea41ee2b5c460ec14"),(0,r.$)("c3ffa2f2b92800521d66b095f984c09871a59991"),(0,r.$)("760103398ceab9e651401c33629353de1651be51"),(0,r.$)("33aa16bc9f1a58feb677c866df8e3f34715bf4cc");var c=(0,r.$)("2270bf1cb354aa67cd613a5621901dc54c5bcc9b");(0,r.$)("b59f2ccacdb3741bd96f6dc12291c2c3b21e0a23"),(0,r.$)("fcd51069a16a1d8e8dcc2abb1ca3ad2f1ae8e0b7"),(0,r.$)("cb38da47c4ec286b65ead3428aadb7a8757e469a");var i=(0,r.$)("96d483e61f841a4cbb8efb64bd62e197a7f943f6");(0,r.$)("03681d31c002ec5e321e70ed7ca47205e6774d6b");var d=(0,r.$)("f8c0ed3a8cbf8493d11482b377dc9df46857ac60");(0,r.$)("61b8df7ff9666db3275954e94a5eb52cffbc0a6b");var o=(0,r.$)("789ffd99fffebbfb03607e6b9618e95bc0e76f67"),u=(0,r.$)("cb6c678b6368f48125983a2b56b1114a8674b362");(0,r.$)("7394c9dc1c56cdb2136bc3c7e316236f6480ec9e"),(0,r.$)("0c5883976d7fa0868ccb42462ef171c66bd12522");var f=(0,r.$)("12a2ff6564bbd357d7cf7213b946341d94c97bee");(0,r.$)("26812edb1cf061ae4410634bdca1229970c69e45"),(0,r.$)("8661f048c15b4e7717f34a3a6dc462108b8828cd"),(0,r.$)("1dabdb035648fad70371bb858215efc0dc5c3877"),(0,r.$)("f706533d5b0f2059b35187a1b9c0ed559ccca065"),(0,r.$)("8b19577637df67a7a8bc55745a62cfd1c5fbec09"),(0,r.$)("863cc2cdd36c0e5db891297ed3f48098c70bdefc"),(0,r.$)("f403fb790a774255a9c6e3b0d89b2631b753b755");var m=(0,r.$)("67da3e10ed56aaf123e798955cbf7c86eab284ac"),h=(0,r.$)("ce182e52f7a9b1ef994d5cad16a3946432bc0c19"),b=(0,r.$)("42a0e41035d5fc507e966c948528d8ccbef118cf"),x=(0,r.$)("ebc39bc5407d4af5c178fd4aabc9f507a54563b3"),p=(0,r.$)("ed2707ed8689ce346d19cd1dd8a60402d973ece6"),g=(0,r.$)("9df128fdfb2fae3da423141632a6412f971e1bd0"),y=(0,r.$)("a643267e5a1f4e605fa91572a54b66c4fea7b100");(0,r.$)("aadc18fd0537a0e6955a772b76cded026d9b38a6");var v=(0,r.$)("48408e1394d86e384778e61b7b60463588a65058"),j=(0,r.$)("6964e1a1aedd604de1a329fde9310cfd6afc4e6f"),N=(0,r.$)("703944c2688a7ac82260ade8577763eea2db9482"),w=(0,r.$)("98777e19fb935fbe305469273df06630b983aad0"),$=(0,r.$)("9b75c0632ef93b84e99886925297ab93a4191723");(0,r.$)("dabd4db97326e43ae0a7d2172d8a1af7062ddb72"),(0,r.$)("ccd0722679f06366ef0ce23ad1a3ee550ac2fa78"),(0,r.$)("9d50a2eb85425538d0892748783934899fb5f52f"),(0,r.$)("98a6195747ec0875015e4bf1cf18ea12a916f9d4"),(0,r.$)("6326492cdc96f4870693689c3087b8ee78f1ee35"),(0,r.$)("cee3acea696acad1f33c6dec94874f492c39749d"),(0,r.$)("5997758a3ba2fc82cb75d6419db138d832a3d831"),(0,r.$)("4d81e9d21fcaacbaff21ed36c564800313a28b6a");var k=(0,r.$)("c9b5c31f3e8aadaac5449cd8caa539f9e1c672c0"),_=(0,r.$)("90d24bc812149050e733128c0db82a1aa5c08249"),I=(0,r.$)("7d2740b47feda4d8ae5d5c246342ba46d10b3c97")},27381:function(e,t,a){"use strict";a.r(t),a.d(t,{UsernameForm:function(){return N}});var r=a(57437),n=a(2265),s=a(29673),l=a(75275),c=a(13590),i=a(29501),d=a(31229),o=a(20059),u=a(88612),f=a(30699),m=a(87820),h=a(90357),b=a(60101),x=a(7423),p=a(45953),g=a(71931),y=a(23645);let v=d.z.object({email:d.z.string().email(),userName:d.z.string().min(3,{message:"Username must be at least 3 characters long"}).max(20,{message:"Username must be at most 20 characters long"}).regex(/^[a-zA-Z0-9]+$/,{message:"Username can only contain letters and numbers. No spaces, underscores, or special characters."}),name:d.z.string().min(3,{message:"Name must be at least 3 characters long"})});function j(e){let{userId:t,email:a,name:s,userName:l}=e,[d,j]=(0,n.useState)(!0),{setAuthDialog:N}=(0,b.p)(),[w,$]=(0,n.useState)(null),[k,_]=(0,n.useState)([]),I=(0,i.cI)({mode:"onChange",resolver:(0,c.F)(v),defaultValues:{userName:l||"",email:a,name:s}}),{handleSubmit:S,control:E,formState:{isSubmitting:M,isValid:P,errors:C},watch:z,trigger:L,setError:O,clearErrors:T}=I,A=z("userName"),D=async e=>{console.log(t,"userId",e,"Start username change flow"),await (0,x.v_)(t,{username:e.userName,name:e.name,userNameChanged:!0}),window.location.reload(),N(!1)},H=(0,g.y1)(async e=>{if(e.length>=3){let t=await (0,p.iN)(e,I.getValues("email"));if($(t),t)_([]);else{O("userName",{message:"Username already taken"});let e=[],t=new Set;for(;e.length<3&&t.size<30;){let a=(0,y.T)(s);!t.has(a)&&(t.add(a),await (0,p.iN)(a,I.getValues("email"))&&e.push(a))}_(e)}}},500),[V,q]=(0,n.useState)(!1),B=async()=>{try{let e=!1,t="";for(;!e;){let a=(0,y.T)(s);await (0,p.iN)(a,I.getValues("email"))&&(t=a,e=!0)}I.setValue("userName",t),j(!1)}catch(e){console.error("Error fetching username availability:",e)}};(0,n.useEffect)(()=>{A&&A.length>=3&&H(A)},[A,H]),(0,n.useEffect)(()=>{let e=I.getValues();e.email&&e.userName&&e.name&&e.userName.length>=3&&e.name.length>=3&&q(!0)},[I,z("userName"),z("name")]),(0,n.useEffect)(()=>{B()},[]);let R=!(Object.keys(C).length>0)&&V&&(!0===w||A===l);return d?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsxs)("form",{onSubmit:S(D),className:"form-container mt-4",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Welcome!"}),(0,r.jsx)("p",{className:"text-lg",children:"Please fill in your details"})]}),(0,r.jsxs)(o.l0,{...I,children:[(0,r.jsx)(o.Wi,{name:"email",control:E,render:e=>{let{field:t}=e;return(0,r.jsxs)(o.xJ,{className:"form-item",children:[(0,r.jsx)(o.lX,{className:"form-label",children:"Email"}),(0,r.jsx)(o.NI,{children:(0,r.jsx)(u.II,{type:"email",autoComplete:"email",placeholder:"Enter your email",...t,disabled:!0,className:(0,m.cn)(h.inputStyle)})}),(0,r.jsx)(o.zG,{className:"form-error-text"}),(0,r.jsx)("p",{className:"text-green-500 text-sm",children:"Your email has been authenticated by OAuth2"})]})}}),(0,r.jsx)(o.Wi,{name:"userName",control:E,render:e=>{let{field:t}=e;return(0,r.jsxs)(o.xJ,{className:"form-item",children:[(0,r.jsx)(o.lX,{className:"form-label",children:"User name"}),(0,r.jsx)(o.NI,{children:(0,r.jsx)(u.II,{type:"text",autoComplete:"username",placeholder:"Enter your user name",...t,onChange:e=>{t.onChange(e),e.target.value.length>=3&&H(e.target.value)},className:(0,m.cn)(h.inputStyle)})}),(0,r.jsx)(o.zG,{className:"form-error-text"}),!1===w&&k.length>0&&(0,r.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[(0,r.jsx)("p",{children:"Try one of these available usernames:"}),(0,r.jsx)("ul",{className:"mt-1 space-y-1",children:k.map(e=>(0,r.jsx)("li",{className:"cursor-pointer text-blue-600 hover:underline",onClick:()=>{I.setValue("userName",e),T("userName"),$(!0),_([])},children:e},e))})]})]})}}),(0,r.jsx)(o.Wi,{name:"name",control:E,render:e=>{let{field:t}=e;return(0,r.jsxs)(o.xJ,{className:"form-item",children:[(0,r.jsx)(o.lX,{className:"form-label",children:"Name"}),(0,r.jsx)(o.NI,{children:(0,r.jsx)(u.II,{type:"text",autoComplete:"name",placeholder:"Enter your name",...t,className:(0,m.cn)(h.inputStyle)})}),(0,r.jsx)(o.zG,{className:"form-error-text"})]})}}),(0,r.jsx)(f.ZP,{type:"submit",disabled:!R||M,className:"flex-1/2 w-full",children:"Let's get started"})]})]})}function N(e){let{user:t}=e,[a,c]=(0,n.useState)(t&&!t.usernameChanged||!1);return t?(0,r.jsx)(s.Vq,{open:a,onClose:()=>{},className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-8 text-center md:p-6",children:[(0,r.jsx)(s.ZR,{className:"fixed inset-0 bg-neutral-900 bg-opacity-60 dark:bg-opacity-85"}),(0,r.jsx)("div",{className:"inline-flex w-full max-w-screen-md transform flex-col md:p-8 py-12  overflow-hidden rounded-2xl border border-black border-opacity-5 bg-white text-left align-middle text-neutral-900 shadow-xl transition-all dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-300",children:(0,r.jsxs)("div",{className:"form-outer-container px-5 md:px-28",children:[(0,r.jsx)(l.Z,{}),(0,r.jsx)(j,{userId:t.id,email:t.email,name:t.name||"No name",userName:t.username})]})})]})}):null}},48667:function(e,t,a){"use strict";a.d(t,{default:function(){return n.a}});var r=a(88003),n=a.n(r)},8221:function(e,t){"use strict";let a;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{DOMAttributeNames:function(){return r},default:function(){return l},isEqualNode:function(){return s}});let r={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",noModule:"noModule"};function n(e){let{type:t,props:a}=e,n=document.createElement(t);for(let e in a){if(!a.hasOwnProperty(e)||"children"===e||"dangerouslySetInnerHTML"===e||void 0===a[e])continue;let s=r[e]||e.toLowerCase();"script"===t&&("async"===s||"defer"===s||"noModule"===s)?n[s]=!!a[e]:n.setAttribute(s,a[e])}let{children:s,dangerouslySetInnerHTML:l}=a;return l?n.innerHTML=l.__html||"":s&&(n.textContent="string"==typeof s?s:Array.isArray(s)?s.join(""):""),n}function s(e,t){if(e instanceof HTMLElement&&t instanceof HTMLElement){let a=t.getAttribute("nonce");if(a&&!e.getAttribute("nonce")){let r=t.cloneNode(!0);return r.setAttribute("nonce",""),r.nonce=a,a===e.nonce&&e.isEqualNode(r)}}return e.isEqualNode(t)}function l(){return{mountedInstances:new Set,updateHead:e=>{let t={};e.forEach(e=>{if("link"===e.type&&e.props["data-optimized-fonts"]){if(document.querySelector('style[data-href="'+e.props["data-href"]+'"]'))return;e.props.href=e.props["data-href"],e.props["data-href"]=void 0}let a=t[e.type]||[];a.push(e),t[e.type]=a});let r=t.title?t.title[0]:null,n="";if(r){let{children:e}=r.props;n="string"==typeof e?e:Array.isArray(e)?e.join(""):""}n!==document.title&&(document.title=n),["meta","base","link","style","script"].forEach(e=>{a(e,t[e]||[])})}}}a=(e,t)=>{let a=document.getElementsByTagName("head")[0],r=a.querySelector("meta[name=next-head-count]"),l=Number(r.content),c=[];for(let t=0,a=r.previousElementSibling;t<l;t++,a=(null==a?void 0:a.previousElementSibling)||null){var i;(null==a?void 0:null==(i=a.tagName)?void 0:i.toLowerCase())===e&&c.push(a)}let d=t.map(n).filter(e=>{for(let t=0,a=c.length;t<a;t++)if(s(c[t],e))return c.splice(t,1),!1;return!0});c.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),d.forEach(e=>a.insertBefore(e,r)),r.content=(l-c.length+d.length).toString()},("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},88003:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return y},handleClientScriptLoad:function(){return x},initScriptLoader:function(){return p}});let r=a(60917),n=a(52140),s=a(57437),l=r._(a(54887)),c=n._(a(2265)),i=a(48701),d=a(8221),o=a(63515),u=new Map,f=new Set,m=["onLoad","onReady","dangerouslySetInnerHTML","children","onError","strategy","stylesheets"],h=e=>{if(l.default.preinit){e.forEach(e=>{l.default.preinit(e,{as:"style"})});return}if("undefined"!=typeof window){let t=document.head;e.forEach(e=>{let a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=e,t.appendChild(a)})}},b=e=>{let{src:t,id:a,onLoad:r=()=>{},onReady:n=null,dangerouslySetInnerHTML:s,children:l="",strategy:c="afterInteractive",onError:i,stylesheets:o}=e,b=a||t;if(b&&f.has(b))return;if(u.has(t)){f.add(b),u.get(t).then(r,i);return}let x=()=>{n&&n(),f.add(b)},p=document.createElement("script"),g=new Promise((e,t)=>{p.addEventListener("load",function(t){e(),r&&r.call(this,t),x()}),p.addEventListener("error",function(e){t(e)})}).catch(function(e){i&&i(e)});for(let[a,r]of(s?(p.innerHTML=s.__html||"",x()):l?(p.textContent="string"==typeof l?l:Array.isArray(l)?l.join(""):"",x()):t&&(p.src=t,u.set(t,g)),Object.entries(e))){if(void 0===r||m.includes(a))continue;let e=d.DOMAttributeNames[a]||a.toLowerCase();p.setAttribute(e,r)}"worker"===c&&p.setAttribute("type","text/partytown"),p.setAttribute("data-nscript",c),o&&h(o),document.body.appendChild(p)};function x(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,o.requestIdleCallback)(()=>b(e))}):b(e)}function p(e){e.forEach(x),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(e=>{let t=e.id||e.getAttribute("src");f.add(t)})}function g(e){let{id:t,src:a="",onLoad:r=()=>{},onReady:n=null,strategy:d="afterInteractive",onError:u,stylesheets:m,...h}=e,{updateScripts:x,scripts:p,getIsSsr:g,appDir:y,nonce:v}=(0,c.useContext)(i.HeadManagerContext),j=(0,c.useRef)(!1);(0,c.useEffect)(()=>{let e=t||a;j.current||(n&&e&&f.has(e)&&n(),j.current=!0)},[n,t,a]);let N=(0,c.useRef)(!1);if((0,c.useEffect)(()=>{!N.current&&("afterInteractive"===d?b(e):"lazyOnload"===d&&("complete"===document.readyState?(0,o.requestIdleCallback)(()=>b(e)):window.addEventListener("load",()=>{(0,o.requestIdleCallback)(()=>b(e))})),N.current=!0)},[e,d]),("beforeInteractive"===d||"worker"===d)&&(x?(p[d]=(p[d]||[]).concat([{id:t,src:a,onLoad:r,onReady:n,onError:u,...h}]),x(p)):g&&g()?f.add(t||a):g&&!g()&&b(e)),y){if(m&&m.forEach(e=>{l.default.preinit(e,{as:"style"})}),"beforeInteractive"===d)return a?(l.default.preload(a,h.integrity?{as:"script",integrity:h.integrity,nonce:v,crossOrigin:h.crossOrigin}:{as:"script",nonce:v,crossOrigin:h.crossOrigin}),(0,s.jsx)("script",{nonce:v,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([a,{...h,id:t}])+")"}})):(h.dangerouslySetInnerHTML&&(h.children=h.dangerouslySetInnerHTML.__html,delete h.dangerouslySetInnerHTML),(0,s.jsx)("script",{nonce:v,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push("+JSON.stringify([0,{...h,id:t}])+")"}}));"afterInteractive"===d&&a&&l.default.preload(a,h.integrity?{as:"script",integrity:h.integrity,nonce:v,crossOrigin:h.crossOrigin}:{as:"script",nonce:v,crossOrigin:h.crossOrigin})}return null}Object.defineProperty(g,"__nextScript",{value:!0});let y=g;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},41305:function(){}},function(e){e.O(0,[4466,7699,5280,6051,614,5706,1779,4574,5501,6137,2972,7261,1229,6795,5455,5878,9750,605,2327,7628,9673,2093,4647,3464,357,8186,2520,2971,2117,1744],function(){return e(e.s=75907)}),_N_E=e.O()}]);